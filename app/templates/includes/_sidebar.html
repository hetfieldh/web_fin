{# app\templates\includes\_sidebar.html #}

<div class="sidebar">
    <div class="logo">
        <a href="{{ url_for('dashboard_bp.dashboard') }}">
            <img src="{{ url_for('static', filename='images/logo.png') }}" alt="WebFin Logo" class="logo-shadow">
        </a>
    </div>
    <nav>
        <ul>
            <li>
                <a href="{{ url_for('dashboard_bp.dashboard') }}"
                    class="{% if request.endpoint == 'dashboard_bp.dashboard' %}active{% endif %}">
                    <i class="fas fa-home"></i> Dashboard
                </a>
            </li>

            <li>
                <a href="{{ url_for('conta_bp.list_contas') }}"
                    class="{% if request.endpoint.startswith('conta_bp') %}active{% endif %}">
                    <i class="fas fa-wallet"></i> Contas Bancárias
                </a>
            </li>

            <li>
                <a href="{{ url_for('crediario_bp.list_crediarios') }}"
                    class="{% if request.endpoint.startswith('crediario_bp') %}active{% endif %}">
                    <i class="fas fa-credit-card"></i> Crediários
                </a>
            </li>

            <li>
                <a href="{{ url_for('despesa_receita_bp.list_despesas_receitas') }}"
                    class="{% if request.endpoint.startswith('despesa_receita_bp') %}active{% endif %}">
                    <i class="fas fa-credit-card"></i> Despesas e Receitas
                </a>
            </li>

            <li>
                <a href="{{ url_for('renda_bp.list_rendas') }}"
                    class="{% if request.endpoint.startswith('renda_bp') %}active{% endif %}">
                    <i class="fas fa-credit-card"></i> Rendas
                </a>
            </li>

            <div class="border-menu"></div>

            <li class="has-submenu">
                <a href="#" class="submenu-toggle">
                    <i class="fas fa-exchange-alt"></i> Extratos
                    <i class="fas fa-chevron-down submenu-arrow"></i>
                </a>
                <ul class="submenu">
                    <li>
                        <a href="{{ url_for('extrato_bancario_bp.selecionar_extrato') }}"
                            class="{% if request.endpoint.startswith('extrato_bancario_bp') %}active{% endif %}">
                            <i class="fas fa-money-bill-transfer"></i> Bancário
                        </a>
                    </li>
                </ul>
            </li>

            <li class="has-submenu">
                <a href="#" class="submenu-toggle">
                    <i class="fas fa-exchange-alt"></i> Transações
                    <i class="fas fa-chevron-down submenu-arrow"></i>
                </a>
                <ul class="submenu">
                    <li>
                        <a href="{{ url_for('conta_movimento_bp.list_movimentos') }}"
                            class="{% if request.endpoint.startswith('conta_movimento_bp') %}active{% endif %}">
                            <i class="fas fa-money-bill-transfer"></i> Bancária
                        </a>
                    </li>
                    <li>
                        <a href="{{ url_for('crediario_movimento_bp.list_movimentos_crediario') }}"
                            class="{% if request.endpoint.startswith('crediario_movimento_bp') %}active{% endif %}">
                            <i class="fas fa-money-bill-transfer"></i> Crediário
                        </a>
                    </li>
                    <li>
                        <a href="{{ url_for('financiamento_bp.list_financiamentos') }}"
                            class="{% if request.endpoint.startswith('financiamentos') %}active{% endif %}">
                            <i class="fas fa-money-bill-transfer"></i> Financiamento
                        </a>
                    </li>
                    <li>
                        <a href="{{ url_for('renda_movimento_bp.list_renda_movimentos') }}"
                            class="{% if request.endpoint.startswith('renda_movimento_bp') %}active{% endif %}">
                            <i class="fas fa-money-bill-transfer"></i> Renda
                        </a>
                    </li>
                </ul>
            </li>

            <div class="border-menu"></div>

            {% if current_user.is_authenticated and current_user.is_admin %}
            <li>
                <a href="{{ url_for('usuario_bp.list_users') }}"
                    class="{% if 'usuario_bp' in request.endpoint and request.endpoint != 'usuario_bp.login' and request.endpoint != 'usuario_bp.logout' %}active{% endif %}">
                    <i class="fas fa-users"></i> Usuários
                </a>
            </li>
            <li>
                <a href="{{ url_for('audit_log_bp.list_audit_logs') }}"
                    class="{% if request.endpoint.startswith('audit_log_bp') %}active{% endif %}">
                    <i class="fas fa-clipboard-list"></i> Log de Auditoria
                </a>
            </li>
            {% endif %}

            {% if current_user.is_authenticated and not current_user.is_admin %}
            <li>
                <a href="{{ url_for('configuracoes_bp.settings') }}"
                    class="{% if 'configuracoes_bp' in request.endpoint %}active{% endif %}">
                    <i class="fas fa-cog"></i> Configurações
                </a>
            </li>
            {% endif %}

            <li>
                <a href="{{ url_for('usuario_bp.logout') }}"
                    class="{% if request.endpoint == 'usuario_bp.logout' %}active{% endif %}">
                    <i class="fas fa-sign-out-alt"></i> Sair
                </a>
            </li>
        </ul>
    </nav>
    <div class="sidebar-footer">
        {% if current_user.is_authenticated %}
        <p style="font-size: 0.9em; color: #BBB; margin-bottom: 5px;">
            Online: <strong>{{ current_user.login }}</strong>
        </p>
        {% endif %}
        <p class="footer-text">&copy; 2025 WebFin</p>
    </div>
</div>