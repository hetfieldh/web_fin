<div class="sidebar">
    <div class="logo">
        <a href="{{ url_for('dashboard_bp.dashboard') }}"> {# ALTERADO: Link para o novo dashboard_bp #}
            <img src="{{ url_for('static', filename='images/logo.png') }}" alt="WebFin Logo">
        </a>
    </div>
    <nav>
        <ul>
            <li>
                <a href="{{ url_for('dashboard_bp.dashboard') }}" {# ALTERADO: Link para o novo dashboard_bp #}
                    class="{% if request.endpoint == 'dashboard_bp.dashboard' %}active{% endif %}"> {# ALTERADO:
                    Endpoint para o novo dashboard_bp #}
                    <i class="fas fa-home"></i> Dashboard
                </a>
            </li>

            <li>
                <a href="#" {# Mude para {{ url_for('transacao_bp.list_transactions') }} quando criar #}
                    class="{% if request.endpoint == 'transacao_bp.list_transactions' %}active{% endif %}">
                    <i class="fas fa-exchange-alt"></i> Transações
                </a>
            </li>

            {# REMOVIDO: Item "Tipos de Transação" #}
            {#
            <li>
                <a href="{{ url_for('conta_transacao_bp.list_tipos_transacao') }}"
                    class="{% if 'conta_transacao_bp' in request.endpoint %}active{% endif %}">
                    <i class="fas fa-tags"></i> Tipos de Transação
                </a>
            </li>
            #}

            <li>
                <a href="{{ url_for('conta_bp.list_contas') }}"
                    class="{% if 'conta_bp' in request.endpoint %}active{% endif %}">
                    <i class="fas fa-wallet"></i> Contas
                </a>
            </li>

            {# Bloco para Usuários (apenas para administradores) #}
            {% if current_user.is_authenticated and current_user.is_admin %}
            <li>
                <a href="{{ url_for('usuario_bp.list_users') }}" {# ALTERADO: Link para usuario_bp.list_users (que agora
                    é /usuarios/) #}
                    class="{% if 'usuario_bp' in request.endpoint and request.endpoint != 'usuario_bp.login' and request.endpoint != 'usuario_bp.logout' %}active{% endif %}">
                    {# ALTERADO: Condição de active mais abrangente para o blueprint de usuário #}
                    <i class="fas fa-users"></i> Usuários
                </a>
            </li>
            {% endif %}

            {# Bloco para Configurações (apenas para NÃO administradores) #}
            {% if current_user.is_authenticated and not current_user.is_admin %}
            <li>
                <a href="{{ url_for('configuracoes_bp.settings') }}"
                    class="{% if 'configuracoes_bp' in request.endpoint %}active{% endif %}">
                    <i class="fas fa-cog"></i> Configurações
                </a>
            </li>
            {% endif %}

            <li>
                <a href="{{ url_for('usuario_bp.logout') }}"
                    class="{% if request.endpoint == 'usuario_bp.logout' %}active{% endif %}">
                    <i class="fas fa-sign-out-alt"></i> Sair
                </a>
            </li>
        </ul>
    </nav>
    <div class="sidebar-footer">
        {% if current_user.is_authenticated %}
        <p style="font-size: 0.9em; color: #BBB; margin-bottom: 5px;">
            Online: <strong>{{ current_user.login }}</strong>
        </p>
        {% endif %}
        <p class="footer-text">&copy; 2025 WebFin</p>
    </div>
</div>